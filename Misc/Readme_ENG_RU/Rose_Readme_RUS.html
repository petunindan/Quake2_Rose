<body bgcolor="#ecdcc2">
<BODY BACKGROUND="./readmepics/1bg_box.jpg">

<font color="#271103" size="4"><h1>Quake 2: Window of Retaliation, The Armageddon Device - KMQuake 2 порт.</h1></font>

<font color="#271103" size="4"><h2>*** Вступление ***</h2></font>

<font color="#271103" size="4" size="4">
<p>
Всегда любил дополнения от этих авторов и всегда хотел перепройти их на движке с улучшенной графикой (например, на KMQuake 2), однако авторы не стали публиковать исходники модов, поэтому я взял на себя смелость воссоздать контент, содержащийся в gamex86.dll с нуля (а именно оружие, монстров и некоторые скрипты.). Больше недели усердной работы - и в результате получилась практически полная копия (за исключением некоторых отличий, о которых чуть позже).
</p>

<p>
Ссылка на оригинальную страничку авторов (архив): <a href="https://web.archive.org/web/20210927070110/https://www.quakewiki.net/archives/roseville/">web.archive.org...</a>
</p>

</font>

<font color="#271103" size="4"><h2>*** О порте KMQuake2 ***</h2></font>

<font color="#271103" size="4" size="4">
<p>
Так как исходников данных модов в открытом доступе в сети нет, пришлось все делать самому. До этого с C++ не был знаком, поэтому пришлось очень туго, но мануалы по <a href="https://grandbiz.ru/?p=1546">Quake 2 game.dll</a> помогли. Показатели монстров (урон, здоровье и т.д.) вычислял "на глазок", например количество выстрелов из бластера для сбития щита и тому подобное. Весь новый код я пометил своим именем (petunindan), чтобы было проще найти новые строки, если вдруг вам захочется что-нибудь исправить. Проще всего это делать при помощи Notepad++: включаете поиск по файлам, выбираете папку src_kmq2 и ищите "petunindan". Для компиляции использовал последнюю на Июнь 2021 года версию Visual Studio. В общей сложности, на написание всего этого ушло больше недели. Искренне надеюсь, что авторы оригинала не рассердятся за все это копирование без спроса. В противном случае - спрячу статью. Общее описание нового кода и основные отличия от оригинала читайте в конце текста.

<p>
Адаптировал под KMQuake 2 - нарисовал иконки нового оружия и предметов. Мультиплеер не тестировал. Все новые материалы запакованы в .pk3, чтобы старая версия для обычного Quake 2 их не подключала. За основу был взят код дополнений, что также ввело новый, более умный ИИ, чем в оригинале.
<br/>
Так как способа назначить несколько оружий на одну клавишу не нашел, решил назначить новое оружие на другие кнопки. По умолчанию:
<br/>
V - контактная граната. Либо Команда "bind V use proximity grenades".
<br/>
N - лазер обратной связи. Либо Команда "bind N use feedback laser".
<br/>
M - плазменная пушка. "bind M use plasma gun".
<br/><br/>
</p>

</font>

<font color="#271103" size="4"><h2>*** Перевод описания дополнений ***</h2></font>

<font color="#271103" size="4" size="4">

<p>
<strong>Window Of Retaliation</strong> - аддон для Quake 2, содержащий в себе 9 уровней.
<br/>
Действие происходит после поражения Макрона. Вы играете роль пилота, выполняя миссию "найти и уничтожить", зачищая остатки сил Строгг.
<br/>
Выполняя рутинную миссию, вы были сбиты на отдаленной планете, принадлежащей Строгг, и обнаруживаете, что они планируют удар мести. Вы должны разгадать характер этого удара и остановить его, прежде чем Земля будет уничтожена.
<br/>
Window of Retaliation вводит новое оружие и монстров в стандартный набор Quake 2.
</p>

<p><img src="./readmepics/q7sml.jpg" alt="MegaTF" width="267"></p>
<p><img src="./readmepics/quake03.jpg" alt="MegaTF" width="320"></p>

<p>
<strong>The Armageddon Device</strong> - аддон для Quake 2, содержащий в себе 8 уровней.
</p>

<p>
К Земле направляется астероид размером с половину луны. Когда он ударит, вся жизнь на Земле будет уничтожена. Это не обычный кусок планетарного мусора. У этого камня есть примитивный термоядерный привод и самый мощный щит, который мы когда-либо видели. Это оружие - последняя надежда Строгг на победу, под кодовым названием The Armageddon Device (Устройство "Армагеддон").
</br>
Эту информацию мы получили, когда корабль с Земли перехватил шаттл Строгг по пути к астероиду.
</br>
Щит генерируется и управляется из реактора на самой скале. Никто из Строгг не знает код деактивации. Есть три командира Строгг, каждый из них знает по две цифры шестизначного кода. Мы не ждем, что они скажут нам их добровольно.
</p>

<p><img src="./readmepics/n_astS.jpg" alt="MegaTF" width="320"></p>

<p>
Вы выступаете в роли элитного морпеха с задачей получить коды деактивации устройства.
</br>
План действий:
</br>
1) Вас доставят в расчетное местоположение старта астероида. В тех местах есть планета класса М, и мы ожидаем найти там колонию Строгг.
</br>
2) Ваш капитан просканирует местность, чтобы найти подходящее место для скрытной посадки.
</br>
3) Вы возглавите команду из 4 человек и попытаетесь получить код деактивации от командиров Строгг. Ваш боевой компьютер был адаптирован для чтения церебральных имплантатов Строгг и извлечения кода. Это не может быть сделано, пока владелец импланта жив.
</br>
4) Когда вы найдете код, вам нужно будет найти способ попасть на астероид и отключить щит.
</br>
5) Наш военный корабль уничтожит скалу термоядерными зарядами.
</br>
Удачи, солдат!
</p>

<p><img src="./readmepics/shuttleL.jpg" alt="MegaTF" width="720"></p>

<p>
<strong>The Earth War</strong> - аддон для The Armageddon Device, содержащий в себе 9 новых уровней. События миссий, созданных Forrest "Gumpsta" Glithero, происходят на земле во время вторжения Строгг. Захватывающий экшен, враги и оружие из предыдущих дополнений. Для запуска данного дополнения запустите "The Armageddon Device", начните новую игру и выберите сложность. После загрузки игры откройте консоль и напишите "map park", эта команда перенесет вас в начало кампании "The Earth War".
</p>

</font>

<font color="#271103" size="4"><h3><em><strong>* Оружие *</strong></em></h2></font>

<font color="#271103" size="4" size="4">

<p>
<strong>
Бластер ВВС
</strong>
<br/><br/>
Пилотам выдается чуть более мощная версия стандартного бластера. Выпускает два заряда за выстрел в быстрой последовательности.
</p>

<p>
<strong>
Лазер Обратной Связи
</strong>
<br/><br/>
Потрясающее оружие. Использует модифицированную систему рельсовой пушки для зарядки мощного лазера, но для увеличение мощности пользователь может подпитывать исходящий импульс прямо через обратную связь зарядной камеры. Зарядка идет, пока спусковой крючок не будет отпущен, выпуская мощный луч, уничтожающий все на своем пути.
<br/>
Видимый счетчик показывает уровень заряда в процентах.
<br/>
100% заряд по мощности приблизительно сравним с BFG.
<br/>
Внимание! Превышение 102% заряда перегружает оружие, что может вызвать большой взрыв! Тебя предупредили, солдат!
<br/>
Оружие не имеет радиуса поражения по площади, но зато является высокоточным и быстрым, однако требует от стрелка точного прицеливания и контроля заряда.
</p>

<p><img src="./readmepics/laser1.jpg" alt="MegaTF" width="600"></p>

<p>
<strong>
Плазменная Пушка
</strong>
<br/><br/>
Это оружие стреляет в автоматическом режиме зарядами перегретого газа. Заряды имеют небольшой радиус поражения по области и очень эффективны при автоматическом огне.
<br/>
Благодарим команду Loki's Missions за любезное разрешение использовать их модель плазменной пушки.
</p>

<p><img src="./readmepics/plasLarge.jpg" alt="MegaTF" width="720"></p>

<p>
<strong>
Контактные Гранаты
</strong>
<br/><br/>
Доступны только для метания и не могут быть использованы с гранатометом. Срабатывают, когда противник оказывается поблизости. Контактные гранаты можно отличить от обычных по желтой маркировочной полосе.
</p>


</font>

<font color="#271103" size="4"><h3><em><strong>* Монстры *</strong></em></h2></font>

<font color="#271103" size="4" size="4">

<p>
<strong>
Солдат-Штурмовик
</strong>
<br/>
Является элитным гвардейцем сил мести Строгг. Вооружившись мощным экранным щитом и пулеметом может быть серьезным противником.
</p>

<p><img src="./readmepics/stormtr.jpg" alt="MegaTF" width="72"></p>

<p>
<strong>
Hornet Class Flyer - Flyer класса "Шершень"
</strong>
<br/>
Экспериментальная модификация монстра "Flyer". Strogg пытались установить рельсовую пушку и генератор щита на раму, которая и так была перегружена.
<br/>
Смертельно опасен в неожиданных атаках, особенно когда скрывается в рое обычных Flyer'ов. У него есть один недостаток: генератор, питающий щит, не может быть правильно охлажден на такой большой раме. Перегрузите его - и он взорвется. В результате искрящийся и дымящийся шершень становится легкой мишенью.
</p>

<p><img src="./readmepics/hornet.jpg" alt="MegaTF" width="184"></p>

<p>
<strong>
Прокси-Паразит
</strong>
<br/>
Паразит с привычкой бросать контактные мины. Смотри, куда ступаешь!
</p>

<p>
<strong>
Предатели
</strong>
<br/>
Люди, перешедшие на сторону Строгг. Вооружены пулеметами и как правило держатся в группах.
</p>

<p><img src="./readmepics/traitors.jpg" alt="MegaTF" width="400"></p>

<p>
<strong>
Лазерный Гладиатор
</strong>
<br/>
Смертельный враг. Тяжело защищен, быстр и вооружен лазером обратной связи. Остерегайтесь!
</p>

<p>
<strong>
Танк-Генерал
</strong>
<br/>
Верхушка иерархии танков. Эти ребята медленные, но хорошо вооружены и бронированы. Особенно проблемны в группах!
</p>

<p>
<strong>
Танк Смерти
</strong>
<br/>
Быстрее и агрессивнее своих собратьев. Вооруженные плазменной пушкой и импульсным лазером, они не дадут вам права на ошибку! Легко узнаваемы по знаку черепа с костями.
</p>

<p>
<strong>
Гипер-Танк
</strong>
<br/>
Финальный босс. Вооружен ракетами, гранатами, бластером и пулеметом, использует BFG, если дела идут совсем плохо.
</p>

<p>
<strong>
Босс-Предатель
</strong>
<br/>
С использованием человеческой ДНК возникли проблемы - клоны оказались слишком хитры и поднялись на вершину иерархии Строгг, захватив власть. Также является научным гением, используя технологии Строгг в полную силу. Пользуется личным маскирующим устройством а также целым арсеналом оружия.
</p>

</font>

<font color="#271103" size="4"><h2>*** Основные отличия порта KMQ2 от оригинала ***</h2></font>

<font color="#271103" size="4" size="4">

<p>
Бластер ВВС - от оригинала не отличается.
<br/>
Лазер обратной связи - идентичен оригиналу за исключением того, что авторам оригинала удалось отвязать механику выстрела от анимации модели оружия, у меня так не получилось и мне пришлось изменять модель оружия под новый код.
<br/>
Плазменная пушка - идентична оригиналу + боеприпасы.
<br/>
Гипербластер - также как и в TaD каждые несколько выстрелов выпускает зеленый трассер.
<br/>
Контактные гранаты - в оригинале использовались обычные гранаты, но часовой механизм был заменен на логику: "Враг подошел - мина взорвалась, свой подошел - мина не взрывается". Я тоже пытался так сделать, но не получилось, поэтому использовал логику прокс-гранат из дополнения "Ground Zero".
<br/>
Солдат-Штурмовик - идентичен оригиналу.
<br/>
Hornet Class Flyer - Flyer класса "Шершень" - идентичен оригиналу.
<br/>
Прокси-Паразит - оригинал кидал прокси мины рядом с собой. В связи с изменением логики прокси гранат, теперь он кидает мину в сторону игрока, но флаг "grenade" позволяет монстрам обходить свои мины и не наступать на них.
<br/>
Предатели - идентичны оригиналам, за исключением некоторых мелких отличий. И да, мой код для них - огромное награмождение, просьба не смеяться :D . Зато работает! Разве что босс может иногда забыть включить/выключить щит.
<br/>
Лазерный гладиатор - идентичен оригиналу.
<br/>
Танк-Генерал - идентичен оригиналу.
<br/>
Танк Смерти - идентичен оригиналу.
<br/>
Гипер-Танк - идентичен оригиналу. Код оружия был подсмотрен в <a href="https://grandbiz.ru/?p=80">StroggDM.</a>
<br/>
В одной из миссий есть задание уничтожить несколько монстров, в их числе танк, сидящий в кресле. Долго бился с этой задачкой, он упорно отказывался засчитываться, но вдруг я что-то добавил и он стал засчитываться. Что добавил - я сам не понял, но трогать не стал и не дыша закрыл файл.
<br/>
ДНК Сканнер - Единственная вещь, которую я не смог сделать. На карте существуют "trigger_dna" и они активируются только тогда, когда у игрока в инвентаре есть "DNA Scanner". Как только я не пытался это сделать - ничего не работало. Главной проблемой стало найти код проверки инвентаря игрока - примеров попросту нет, а все попытки самому что-то написать вызывали вылет игры. Поэтому пришлось сделать так, чтобы триггеры активировались в любом случае.
<br/>
Финальная загадка с цифрами - тот еще крепкий орешек, но его я раскусил, в отличие от предыдущего. Как я понял, в оригинале разработчики использовали какую-то систему с задействованием триггера, но я сделал по-своему, вроде работает.
<br/>
</p>
</font>

<font color="#271103" size="4"><h2>*** Авторы ***</h2></font>

<font color="#271103" size="4" size="4">

<p>
Разработчики модов - <a href="https://web.archive.org/web/20210927070110/https://www.quakewiki.net/archives/roseville/">Roseville Missions Team.</a>
</p>

<p>
Адаптация под KMQuake2 - <a href="https://grandbiz.ru/">Petunindan</a>
</p>

<p>
Вся оригинальная документация по модам в папке “rose_docs”.
</p>

<p><img src="./readmepics/kmquake2_000.webp" alt="MegaTF" width="720"></p>

<p><img src="./readmepics/kmquake2_002.webp" alt="MegaTF" width="720"></p>

</font>

